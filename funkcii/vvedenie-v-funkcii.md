---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Введение в функции

### Введение

* Функция — это **группа инструкций**, которая существует внутри программы с целью выполнения определенной задачи
* Когда задача большая, её необходимо разбить на несколько приемлимых порций. Для этого используют функции.
* _Пример:_  нам нужно рассчитать заработную плату. Для написания программы нам нужно разбить задачу на подзадачи:

```
1. Получение почасовой ставки оплаты труда сотрудника
2. Получение числа отработанных часов
3. Расчёт заработной платы сотрудника до удержаний
4. Расчёт оплаты сверхурочных часов
5. Расчёт налоговых и прочих удержаний
6. Расчёт чистой заработной платы
7. Печать ведомости на получение заработной платы
```

* Мы видим список инструкций, выполняя которые по очереди мы добьемся цели
* Мы можем выделить функцию для решения каждой подзадачи. В нашей программе могли бы быть такие функции:

```
- функция получения почасовой ставки оплаты труда сотрудника
- функция получения количества часов
- функция расчета заработной платы сотрудника до удержаний
- функция расчета оплаты сверхурочных часов
- функция расчета налоговых и прочих удержаний
- функция расчета чистой заработной платы
- функция печати ведомости на получение заработной платы
```

* Это называется **модульным подходом** и **модуляризацией** программы
* Какие преимущества такого подхода?
  * **Более простой код**. Каждую функцию читать легче, чем одну длинную последовательность
  * **Повторное использование кода** — уменьшение дублирования в программе
  * **Более простое тестирование**
  * **Более быстрая разработка**: написанные однажды функции могут быть применены в нескольких программах
  * **Упрощение командной работы**

#### Возврат значения

* функции без возврата значения просто выполняют инструкции и ничего не возвращают
* функции с возвратом значения что-то возвращают в ту инструкцию, которая её вызвала Примеры:
* функция input() возвращает значение — строку
* функции int() и float() тоже возвращают значение
* функция print() ничего не возвращает, а только выполняет инструкцию печати

### Функции без возврата значения

* Именование:
  * имя функции должно отражать то, что она делает
  * не должно быть пробелов, ключевых слов Python
  * первый символ — буква или нижнее подчеркивание
  * как правило в именах функции используются глаголы ("get, take, calculate, print и т.д")
* Синтаксис написания функций следующий

```python
def имя_функции(): # это заголовок функции
    инструкция # это блок инструкций
    инструкция
    ...
```

* Это называется _определением_ функции. Говорят, что функция _определена_.

```python
def message():
    print("Я - Артур,")
    print('король британцев')
```

* Теперь _вызовем_ функцию:

```python
message()
```

* Интерпретатор идет сверху вниз:

1. Видит определение функции,
2. Далее видит вызов функции,
3. Возвращается к определению,
4. Выполняет блок инструкций
5. И затем снова возвращается к месту вызова.

* Добавим ещё одну функцию в наш пример

```python
# определяем главную функцию
def main():
    print("У меня для вас известие.")
    message()
    print("До свидания!")

# затем определяем функцию message
def message():
    print("Я - Артур,")
    print('король британцев')

# вызываем главную функцию
main()
```

_**Интерактив:**_

* Из каких двух частей состоит определение функции?
* Что значит "вызвать функцию"?
* Зачем нужны отступы в блоке инструкций?

_**Разбор:**_

```
Напишем программу, которая выводит на экран инструкции по разборке
сушилки для белья фирмы Nika.
Чтобы разобрать сушилку, нужно:
1. Отключить сушилку и отодвинуть от стены
2. Удалить шесть винтов с задней стороны сушилки
3. Удалить заднюю панель сушилки
4. Вынуть верхний блок сушилки
Программа должна показывать шаг за шагом по очереди по нажатию клавиши
Enter. Также необходимо предусмотреть приветственное сообщение.
```

* Подготовим "каркас нашей программы". Затем реализуем каждую функцию.

```python
def main():
    '''
    Последовательно вызывает функции и печатает одну за другой.
    После каждой инструкции нужно нажать Enter, чтобы перейти к следующей.
    '''
    pass # инструкция-пустышка - можно использовать при проектировании
# сначала можно продумать функции, а потом написать блоки инструкций в них

def startup_message():
    '''
    Печатает приветственное сообщение
    '''
    pass 

def step1():
    pass
def step2():
    pass
def step3():
    pass
def step4():
    pass
```

* Напишите программу. "Точкой входа" должна быть функция main().

### Области видимости: локальная и  глобальная;

* Когда переменной _внутри функции_ присваивается значение, создаётся **локальная переменная**. Инструкции за пределами функции не имеют к ней доступа. Говорят, что переменная доступна в **локальной области видимости**
* Когда переменная создается **снаружи функции**, она является **глобальной** и доступна в **глобальной области видимости**

{% code overflow="wrap" lineNumbers="true" %}
```python
name = "Tatyana" # глобальная переменная
def print_name():
    print(name)
    
def print_another_name():
    name = "Sergey" # локальная переменная
    print(name)
    
print_name()
print_another_name()

def print_name_again():
    name = "Ilona"
    print(name)

print_name_again()
print(name)
```
{% endcode %}

* _**Практика:**_ напишите любую программу с применением глобальной и локальной переменных.

### Передача аргументов в функцию

* **Аргумент** — любая порция данных, передаваемая в функцию, когда она вызывается
* **Параметр** — переменная, которая получает аргумент, переданный в функцию

```python
def show_double(number): # number - параметр функции
    result = number * 2
    print(result)
```

* Закончим программу и разберём каждый её шаг:

```python
def main(): # определение функции main
    value = 5 # создание переменной value
    show_double(value) # вызов функции show_double с аргументом 5
    
def show_double(number): # определение функции show_double с параметром number
    result = number * 2 # создание переменной result
    print(result) # печать переменной result

main() # вызов функции main
```

* Передавать можно несколько аргументов:

```python
def main():
    print('Сумма чисел 12 и 45 равняется')
    show_sum(12, 45)
    
def show_sum(num1, num2):
    result = num1 + num2
    print(result)
    
main()
```

* Напишите функцию, которая принимает имя и фамилию, и печатает на экран фамилию и имя (именно в этом порядке)

#### Именованные аргументы

* При передаче аргумента в функцию, можно прямо указать имя параметра и его значения. Такой аргумент называется **именованным**

{% code overflow="wrap" %}
```python
def main():
    paral_volume(width=6, length=5, height=7)
    
def paral_volume(length, width, height):
    v = length * width * height
    print(f'Объём параллелепипеда с длиной {length}, шириной {width} и высотой {height} составит {v}')

main()
```
{% endcode %}

* Можно смешивать именованные и позиционные аргументы
* Важно соблюдать порядок — сначала **позиционные**, потом **именованные** аргументы

```python
paral_volume(5, height=7, width=6)
```

### Функции с возвратом значения

* Функции могут не просто выполнять действие, но и **возвращать результат**
* Для этого используется ключевое слово **return.** Значение, указанное после return, отправляется к месту вызова функции

{% code overflow="wrap" %}
```python
def sum(num1, num2):
    result = num1 + num2
    return result
    
def hello(name, surname):
    return f'Hello, {name} {surname}'!
```
{% endcode %}

* Напишем программу, которая спрашивает пользователя доходы за месяц и расходы за месяц. В результате она должна сообщить баланс по итогам месяца

<details>

<summary>Разбор</summary>

```python
def main():
    plus_money = int(input('Введите доходы за месяц: '))
    minus_money = int(input('Введите расходы за месяц: '))
    balance = diff(plus_money, minus_money)    
    print(balance)
    
def diff(n1, n2):
    result = n1 - n2
    return result

main()
```

</details>

Возвращение _булевых значений_

{% code overflow="wrap" %}
```python
def is_even(number):
    if number % 2 == 0:
        return True
    else:
        return False

def main():
    number = int(input('Введите число: '))
    if is_even(number): # вызов функции в качестве условия - т.к. она вернет булево значение
        print('Число четное')
    else:
        print('Число нечетное')
```
{% endcode %}

_**Интерактив:**_

```python
def do_something(number):
    return number * 2
```

* Как называется функция?
* Что функция делает?
* Что покажет приведенная ниже инструкция с учетом определения функции?

```python
print(do_something(10))
```

### Модули

* Модуль — это файл, который содержит программный код Python. Большие программы легче отлаживать и поддерживать, когда они разделены на модули
* Разделение, как правило, проводится по смыслу и логике — в одном модуле мы объединяем функции, выполняющие задачи в одной области
* В стандартной библиотеке Python есть большое количество модулей, которые можно подключить при помощи инструкции _**import.**_ Рассмотрим примеры использования одного из популярных модулей: **random**

{% code overflow="wrap" %}
```python
import random
# from random import randint - способ импорта конкретной функции из модуля
# тогда эту функцию можно будет вызывать без названия модуля
# вот так: randint(0, 10)
random.randint(0, 10) # функция возвращает целое число в диапазоне от 0 до 10 включительно
random.randrange(start, stop, step) # возвращает случайно выбранное число из последовательности
lst = list(range(10)) # список целых чисел от 0 до 9
random.choice(lst) # вернет случайный элемент последовательности
random.shuffle(lst) # перемешает случайным образом элементы изменяемой последовательности
```
{% endcode %}

***

_**Интерактив:**_

* Какое ключевое слово игнорируется интерпретатором и может использоваться в качестве местозаполнителя для кода, который будет написан позже?
* Как определить функцию? Как её вызвать?
* Глобальная или локальная переменная создаётся внутри функции?
* Какая инструкция должна быть в функции для возврата значения?
* Что такое булева функция?
* Зачем разбивать большую программу на модули?

### Практика

{% code overflow="wrap" %}
```
Разминка:
Боб работает водителем автобуса. Тем не менее, он стал чрезвычайно популярен среди жителей города. С таким количеством пассажиров, желающих сесть в его автобус, ему иногда приходится сталкиваться с проблемой нехватки места в автобусе! Он хочет, чтобы вы написали простую программу, сообщающую ему, сможет ли он разместить всех пассажиров. Обзор задачи: Вам нужно написать функцию, которая принимает три параметра:
cap — это количество человек, которое может вместить автобус, не считая водителя.
on - количество людей в автобусе, не считая водителя.
wait - это количество людей, ожидающих посадки в автобус, исключая водителя.
Если места достаточно, вернуть 0, а если нет, вернуть количество пассажиров, которых он не может взять.

Примеры использования:
cap = 10, on = 5, wait = 5 --> 0 # Он может вместить всех 5 пассажиров
cap = 100, on = 60, wait = 50 --> 10 # Он не может вместить 10 из 50 ожидающих
```
{% endcode %}

{% code overflow="wrap" %}
```
1. Конвертер километров.
Напишите программу, которая просит пользователя ввести расстояние в километрах и затем это расстояние преобразует в мили. Формула преобразования:
    мили = километры * 0.6214

2. Напишите функцию, которая принимает в качестве параметров время прохождения маршрута и расстояние, а возвращает среднюю скорость на маршруте

3. Расходы на авто. 
Напишите программу, которая просит пользователя ввести месячные расходы на следующие нужды, связанные с автомобилем: платеж по кредиту, страховку, бензин, техобслуживание. Затем программа должна показать общую месячную стоимость и общую годовую стоимость этих расходов.
```
{% endcode %}

{% code overflow="wrap" %}
```
4. Напишите функцию is_odd, которая получает целое число и возвращает True для нечетных чисел или False для четных.

5. Напишите функцию is_prime, которая получает целое число и возвращает True для простых чисел или False для чисел, не являющихся простыми.

6. Напишите программу, которая генерирует 100 случайных чисел и подсчитывает количество четных и нечетных случайных чисел. Используйте функцию is_odd из задачи 4.

7. Напишите программу, которая генерирует 100 случайных чисел и подсчитывает количество простых чисел. Используйте функцию is_prime из задачи 5.
```
{% endcode %}

{% code overflow="wrap" %}
```
8. Математическая разминка. 
Программа предлагает пользователю два случайных числа и случайную математическую операцию из двух: сложение или умножение. Далее пользователь вводит ответ, и если он правильный, программа выводит поздравление. Если ответ неправильный, тогда выводится правильный ответ.

9. Напишите функцию, которая получает строки в «верблюжьем регистре» (ThisIsCamelCased) и преобразует их в «змеиный регистр» (this_is_camel_cased). Измените функцию, добавив в нее аргумент separator, чтобы функция также могла выполнять преобразование к «кебаб-регистру» (this-is-camel-case).

10. При помощи функций реализуйте задачу №9 ("Угадай число") из главы "Циклы".
```
{% endcode %}

{% code overflow="wrap" %}
```
11. Напишите программу, которая дает пользователю возможность поиграть с компьютером в "Камень, ножницы, бумага". Программа должна работать следующим образом: 
    1. Когда программа запускается, генерируется случайное число в диапазоне от 1 до 3. Если число равняется 1, то компьютер выбрал камень. Если число равняется 2, то компьютер выбрал ножницы. Если число равняется 3, то компьютер выбрал бумагу. (Пока не показывайте выбор компьютера)
    2. Пользователь вводит на клавиатуре выбранный вариант "камень", "ножницы" или "бумага"
    3. Выбор компьютера выводится на экран.
    4. Победитель выбирается согласно следующим правилась:
        - если один игрок выбирает камень, а другой игрок выбирает ножницы, то побеждает камень (камень разбивает ножницы)
        - если один игрок выбирает ножницы, а другой игрок выбирает бумагу, то побеждают ножницы (ножницы режут бумагу)
        - если один игрок выбирает бумагу, а другой игрок выбирает камень, то побеждает бумага (бумага накрывает камень)
        - если оба игрока делают одинаковый выбор, то для определения победителя нужно сыграть повторный раунд
```
{% endcode %}
