# Работа с файлами в Python

### Открытие файла

```python
файловая_переменная = open(имя_файла, режим, кодировка)
```

* Файловая переменная — имя переменной, которая ссылается на файловый объект
* Имя файла —  строковый литерал, задающий имя файла
* Режим —  строковый литерал, задающий режим доступа (чтение, запись и т.д.), в котором файл будет открыт
* Кодировка — тип кодировки (например, UTF-8 при работе с текстовыми файлами)

#### Режимы

* **r**: **чтение**&#x20;
  * Поток будет открыт _в режиме чтения_
  * Файл, связанный с потоком _должен существовать_ и быть доступным для чтения, в противном случае, функция **open()** вызывает исключение
* **w**: **запись**&#x20;
  * Поток будет открыт _в режиме записи_
  * Файл, связанный с потоком, _не обязан существовать_. Если его не существует, он будет создан. Если существует, он будет обрезан до нулевой длины (стерт). Если создание невозможно (например, из-за системных разрешений) функция **open()** вызывает исключение.&#x20;
* **a**: **дозапись**&#x20;
  * Поток будет открыт _в режиме дозаписи_
  * Файл, связанный с потоком, _не обязан существовать_. Если его не существует, он будет создан. Если существует, виртуальная записывающая головка будет установлена в конец файла (предыдущее содержимое файла останется без изменений)&#x20;
* **r+**: **чтение и обновление**
  * Поток будет открыт _в режиме чтения и обновления_&#x20;
  * Файл, связанный с потоком, _должен существовать и быть доступным для записи_, в противном случае функция **open()** вызывает исключение
  * Операции чтения и записи разрешены для потока
* **w+**: **запись и обновление**&#x20;
  * Поток будет открыт в режиме _записи и обновления_
  * Файл, связанный с потоком, _не обязан существовать_. Если его не существует, он будет создан. Предыдущее содержимое файла остается нетронутым&#x20;
  * Операции чтения и записи разрешены для потока

Есть два типа режимов: **текстовый** и **бинарный**

Текстовый режим — для работы с текстом. Бинарный — для работы с другими типами данных.

<figure><img src="../.gitbook/assets/Screenshot from 2023-11-20 17-22-31.png" alt=""><figcaption><p>Режимы</p></figcaption></figure>

По умолчанию файлы открываются в текстовом режиме. При работе с текстом указывать спецификатор _t **не нужно**_

{% code overflow="wrap" %}
```python
# открываем файл для чтения
test_file = open('test.txt', 'r') 
# убедитесь, что файл существует
# переменная test_file будет ссылаться на файловый объект, который можно использовать для чтения
# открываем файл для записи
test_file = open('test.txt', 'w') 
# если файл существует, его содержимое будет удалено
# переменная test_file будет ссылаться на файловый объект, который можно использовать для записи
test_file = open(r'C:\Users\temp\test.txt', 'w')
# префикс r указывает на raw-строку, которую не следует форматировать
# без него интерпретатор предположит, что символы обратной косой черты являются частью экранированных последовательностей, и произойдёт ошибка
```
{% endcode %}

### Запись данных в файл

После открытия файла для выполнения операций с файлом используются **методы файлового объекта**

```python
файловая_переменная.write(строковое_значение)
```

* Файловая переменная — это переменная, которая ссылается на файловый объект
* Строковое значение — символьная последовательность, которая будет записана в файл
* Файл должен быть открыт для записи, либо произойдёт ошибка

```python
test_file.write("Hello, world!")
# ниже вариант с переменной
name = "Petrov Ivan"
test_file.write(name)
```

### Закрытие файла

После работы с файлом нужно применить метод файлового объекта **close()**

Это действие _разрывает связь программы с файлом_

```python
test_file.close()
```

_**Практика:**_

1. Напишите программу, которая записывает в файл три строковых значения — название страны и её столицу, например: "Россия: Москва"

* Порядок действия следующий: файл должен открыться на запись, далее происходит запись трёх переменных, потом файл закрывается

2. Напишите функцию, которая принимает на вход словарь и строковое значение — название файла (итого два аргумента). В функции должна произойти запись в виде "ключ: значение" элементов словаря. Название файла, который нужно создать — второй аргумент функции.

{% code overflow="wrap" %}
```python
# пример данных, поступающих на вход
test_dict = {'Russia': 'Moscow'}
file_name = 'hello.txt'
# пример вызова функции
write_dict(test_dict, file_name)
# в результате создаётся файл с именем 'hello.txt' и содержимым 'Russia: Moscow'
```
{% endcode %}
